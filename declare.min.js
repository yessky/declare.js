(function(w,F){function n(b,c){throw Error('declare("'+c+'"): '+b);}function x(b,c){for(var a=[],d=0,g={},e={pos:0,map:{},refs:[]},f=0,k=b.length;f<k;++f){var h=b[f],l=h.clsmeta,m=l?l.bases.slice(0):[],l=h.prototype.clsname,p={pos:0,map:{},refs:m};e.refs.push(h);e.map[l]=!0;for(var h=0,n=m.length;h<n;++h)l=m[h].prototype.clsname,p.map[l]=!0,g[l]||(d++,g[l]=!0);a.push(p)}1<k&&a.push(e);g=[];for(f=0;d&&f!==a.length;){p=a[f];e=p.refs[0];l=e.prototype.clsname;for(h=0;h<a.length;++h)if(f!==h&&(k=a[h],
l in k.map&&k.refs[0].prototype.clsname!==l)){e=!1;break}if(e)for(f=0,d--,g.push(e),h=0;h<a.length;++h)k=a[h],delete k.map[l],0<k.refs.length&&k.refs[0].prototype.clsname===l&&k.refs.shift(),0===k.refs.length&&(h<f&&f--,a.splice(h--,1));else f++}if(d)throw Error("can not build a consistent and linear method resolution order");return g}function y(){var b=arguments,c,a,d,g,e,f,k,h;1<b.length?(g=b[0],args=b[1]):args=b[0];c=args.callee;(g=g||c.nom)||n("can not deduce a name to call inherited()",this.clsname);
a=this.constructor.clsmeta;b=a.bases;h=this.__super__=this.__super__||{};d=h.p;if("constructor"!==g){if(h.c!==c&&(d=0,e=b[0],a=e.clsmeta,a.proto[g]!==c)){for(;(e=b[++d])&&!(a=e.clsmeta,f=e.prototype,a&&a.proto[g]===c||f[g]===c&&f.hasOwnProperty(g)););d=e?d:-1}for(c=m[g];e=b[++d];)if(f=e.prototype,f[g]&&(e.clsmeta?f.hasOwnProperty(g):c!==f[g])){k=f[g];break}k=e&&k||c}h.p=d;if(h.c=k)return k.apply(this,args)}function z(b){for(var c=this.constructor.clsmeta.bases,a=0,d=c.length;a<d;++a)if(c[a]===b)return!0;
return this instanceof b}function A(b){r(this.prototype,b);return this}function B(b,c,a){for(var d in c){var g=c[d];d in b&&(b[d]===g||d in t&&t[d]===g)||(b[d]=a?a(d,g):g)}return b}function C(b,c){for(var a in c)"constructor"!==a&&c.hasOwnProperty(a)&&(b[a]=c[a])}function r(b,c){var a,d;for(a in c)d=c[a],d===m[a]&&a in m||"constructor"===a||("[object Function]"===toString.call(d)&&(d.nom=a),b[a]=d);return b}function D(b){return function(){if(!(this instanceof arguments.callee))return u(arguments);
for(var c=b.length-1;0<=c;--c){var a=b[c],d=a.clsmeta;(a=d?d.ctor:a)&&a.apply(this,arguments)}}}function E(b){return function(){if(!(this instanceof arguments.callee))return u(arguments);b&&b.apply(this,arguments)}}function v(b){q.prototype=b.prototype;b=new q;q.prototype=null;return b}function u(b){var c=b.callee,a=v(c);c.apply(a,b);return a}var q=new Function,m=Object.prototype,t={};w.declare=function(b,c,a){var d=[0],g=c,e,f,k;"[object Array]"===toString.call(c)?d=d.concat(x(c,b)):c?"[object Function]"===
toString.call(c)?(f=c.clsmeta,d=d.concat(f?f.bases:c)):n("super class is not a callable constructor.",b):null!==c&&n("unknown super class.",b);if(c=d[d.length-1])for(k=d.length-2;;--k){f=v(c);if(!k)break;e=d[k];(e.clsmeta?C:B)(f,e.prototype);e=new Function;e.superclass=c;e.prototype=f;c=f.constructor=e}else f={};r(f,a);e=a.constructor;e!==m.constructor&&(e.nom="constructor",f.constructor=e);d[0]=e=1===d.length?E(a.constructor):D(d);e.clsmeta={bases:d,parents:g,ctor:a.constructor,proto:a};e.extend=
A;e.prototype=f;f.constructor=e;f.inherited=y;f.isInstanceOf=z;b&&(f.clsname=b);return e}})(this,void 0);