(function(v,E){function w(b,d){for(var a=[],c=0,g={},e={pos:0,map:{},refs:[]},f=0,k=b.length;f<k;++f){var h=b[f],l=h.clsmeta,m=l?l.bases.slice(0):[],l=h.prototype.clsname,p={pos:0,map:{},refs:m};e.refs.push(h);e.map[l]=!0;for(var h=0,n=m.length;h<n;++h)l=m[h].prototype.clsname,p.map[l]=!0,g[l]||(c++,g[l]=!0);a.push(p)}1<k&&a.push(e);g=[];for(f=0;c&&f!==a.length;){p=a[f];e=p.refs[0];l=e.prototype.clsname;for(h=0;h<a.length;++h)if(f!==h&&(k=a[h],l in k.map&&k.refs[0].prototype.clsname!==l)){e=!1;break}if(e)for(f=
0,c--,g.push(e),h=0;h<a.length;++h)k=a[h],delete k.map[l],0<k.refs.length&&k.refs[0].prototype.clsname===l&&k.refs.shift(),0===k.refs.length&&(h<f&&f--,a.splice(h--,1));else f++}if(c)throw Error("can not build a consistent and linear method resolution order");return g}function x(){var b=arguments,d,a,c,g,e,f,k,h;1<b.length?(g=b[0],args=b[1]):args=b[0];d=args.callee;g=g||d.nom;a=this.constructor.clsmeta;b=a.bases;h=this.__super__=this.__super__||{};c=h.p;if("constructor"!==g){if(h.c!==d&&(c=0,e=b[0],
a=e.clsmeta,a.proto[g]!==d)){for(;(e=b[++c])&&!(a=e.clsmeta,f=e.prototype,a&&a.proto[g]===d||f[g]===d&&f.hasOwnProperty(g)););c=e?c:-1}for(d=m[g];e=b[++c];)if(f=e.prototype,f[g]&&(e.clsmeta?f.hasOwnProperty(g):d!==f[g])){k=f[g];break}k=e&&k||d}h.p=c;if(h.c=k)return k.apply(this,args)}function y(b){for(var d=this.constructor.clsmeta.bases,a=0,c=d.length;a<c;++a)if(d[a]===b)return!0;return this instanceof b}function z(b){q(this.prototype,b);return this}function A(b,d,a){for(var c in d){var g=d[c];c in
b&&(b[c]===g||c in r&&r[c]===g)||(b[c]=a?a(c,g):g)}return b}function B(b,d){for(var a in d)"constructor"!==a&&d.hasOwnProperty(a)&&(b[a]=d[a])}function q(b,d){var a,c;for(a in d)c=d[a],c===m[a]&&a in m||"constructor"===a||("[object Function]"===toString.call(c)&&(c.nom=a),b[a]=c);return b}function C(b){return function(){if(!(this instanceof arguments.callee))return t(arguments);for(var d=b.length-1;0<=d;--d){var a=b[d],c=a.clsmeta;(a=c?c.ctor:a)&&a.apply(this,arguments)}}}function D(b){return function(){if(!(this instanceof
arguments.callee))return t(arguments);b&&b.apply(this,arguments)}}function u(b){n.prototype=b.prototype;b=new n;n.prototype=null;return b}function t(b){var d=b.callee,a=u(d);d.apply(a,b);return a}var n=new Function,m=Object.prototype,r={};v.declare=function(b,d,a){var c=[0],g=d,e,f,k;if("[object Array]"===toString.call(d))c=c.concat(w(d,b));else if(d)if("[object Function]"===toString.call(d))f=d.clsmeta,c=c.concat(f?f.bases:d);else throw Error('declare("'+b+'"): super class is not a callable constructor.');
else if(null!==d)throw Error('declare("'+b+'"): unknown super class.');if(d=c[c.length-1])for(k=c.length-2;;--k){f=u(d);if(!k)break;e=c[k];(e.clsmeta?B:A)(f,e.prototype);e=new Function;e.superclass=d;e.prototype=f;d=f.constructor=e}else f={};q(f,a);e=a.constructor;e!==m.constructor&&(e.nom="constructor",f.constructor=e);c[0]=e=1===c.length?D(a.constructor):C(c);e.clsmeta={bases:c,parents:g,ctor:a.constructor,proto:a};e.extend=z;e.prototype=f;f.constructor=e;f.inherited=x;f.isInstanceOf=y;b&&(f.clsname=
b);return e}})(this,void 0);